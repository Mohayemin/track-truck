
<div>
    <form ng-submit="order()" class="form-horizontal">
        <fieldset>
            <legend>
                <span class="col-sm-offset-2">Order a trip</span>
            </legend>
            <div class="well">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Who is the client?</label>
                    <div class="col-sm-10">
                        <select ng-model="request.Client" ng-required="true"
                                ng-options="client.Name for client in clients"
                                class="form-control">
                            <option value=""> -- Choose Client -- </option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">From where to pickup?</label>
                    <div class="col-sm-10">
                        <select ng-model="request.WarehouseId" ng-required="true"
                                ng-options="warehouse.Id as warehouse.Name for warehouse in warehouses"
                                class="form-control">
                            <option value=""> -- Choose 3PW -- </option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">When to pickup?</label>
                    <div class="col-sm-10">
                        <datetime model="request.ExpectedPickupTime" required="true"></datetime>
                    </div>
                </div>
                <fieldset ng-disabled="!request.Client">
                    <div ng-repeat="drop in request.Drops">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Where to drop?</label>
                            <div class="col-sm-10">
                                <select ng-model="drop.BranchId" ng-required="true"
                                        ng-options="branch.Id as branch.Name for branch in request.Client.Branches"
                                        class="form-control">
                                    <option value=""> -- Choose Branch -- </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">When to drop?</label>
                            <div class="col-sm-10">
                                <datetime model="drop.ExpectedDropTime" required="true"></datetime>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 hidden-xs"></label>
                            <div class="col-sm-5 col-xs-6">
                                <label class=" control-label">DR Number (Total <span ng-bind="drop.DeliveryReceipts.length"></span>)</label>
                            </div>
                            <div class="col-sm-5 col-xs-6">
                                <label class="control-label">Number of Boxes (Total <span ng-bind="getTotalBoxes(drop)"></span>)</label>
                            </div>
                        </div>
                        <div ng-repeat="dr in drop.DeliveryReceipts" class="form-group">
                            <label class="col-sm-2 hidden-xs"></label>
                            <div class="col-sm-5 col-xs-6">
                                <input ng-model="dr.DrNumber" ng-required="true"
                                       type="text" min="0" placeholder="DR Number"
                                       class="form-control" />
                            </div>
                            <div class="col-sm-5 col-xs-6">
                                <input ng-model="dr.NumberOfBoxes" ng-required="true"
                                       type="number" min="1" placeholder="Number of Boxes"
                                       class="form-control" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-2 ">
                                <button type="button" class="btn btn-primary btn-xs" ng-click="addDr(drop)">
                                    <i class="fa fa-plus"></i> Add Another DR
                                </button>
                            </div>
                        </div>
                        <hr />
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Total <span ng-bind="request.Drops.length"></span> drop(s)</label>
                        <div class="col-sm-10">
                            <button type="button" class="btn btn-info btn-sm" ng-click="addDrop()">
                                <i class="fa fa-plus"></i>
                                Add Another Drop
                            </button>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="well">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Who will drive?</label>
                    <div class="col-sm-10">
                        <select ng-model="request.DriverId" ng-required="true"
                                ng-options="driver.Id as driver.Name for driver in drivers"
                                class="form-control">
                            <option value=""> -- Choose Driver -- </option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">What is Driver's Payment?</label>
                    <div class="col-sm-10">
                        <div class="row">
                            <div class="col-xs-6">
                                <input ng-model="request.DriverAllowance" ng-required="true"
                                       type="number" min="0" placeholder="Driver's Allowance"
                                       class="form-control" />
                            </div>
                            <div class="col-xs-6">
                                <input ng-model="request.DriverSalary" ng-required="true"
                                       type="number" min="0" placeholder="Driver's Salary"
                                       class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Who will be helper?</label>
                    <div class="col-sm-10">
                        <select ng-model="request.HelperId" ng-required="true"
                                ng-options="helper.Id as helper.Name for helper in helpers"
                                class="form-control">
                            <option value=""> -- Choose Helper -- </option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">What is Helpers's Payment?</label>
                    <div class="col-sm-10">
                        <div class="row">
                            <div class="col-xs-6">
                                <input ng-model="request.HelperAllowance" ng-required="true"
                                       type="number" min="0" placeholder="Helper's Allowance"
                                       class="form-control" />
                            </div>
                            <div class="col-xs-6">
                                <input ng-model="request.HelperSalary" ng-required="true"
                                       type="number" min="0" placeholder="Helper's Salary"
                                       class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <input class="btn btn-success btn-block" type="submit" value="Put Order" />
                </div>
            </div>
        </fieldset>
    </form>
</div>