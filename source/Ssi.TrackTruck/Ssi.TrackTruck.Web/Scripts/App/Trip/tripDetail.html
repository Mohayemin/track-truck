<div>
    <page-title>
        <div class="btn-group btn-group-sm pull-right">
            <delete-button module="'trip'" item-id="trip.Id" action="deleteItem" title="delete trip"></delete-button>
        </div>
    </page-title>
    <div>
        <div class="row">
            <div class="col-sm-6">
                <dl class="dl-horizontal">
                    <dt>Ticket Number</dt>
                    <dd ng-bind="trip.TripTicketNumber"></dd>
                    <dt>Status</dt>
                    <dd><status-label status="trip.StatusObject"></status-label></dd>
                    <dt>Client</dt>
                    <dd ng-bind="trip.Client.Name"></dd>
                    <dt>Pickup Addresse</dt>
                    <dd ng-bind="trip.PickupAddress.Text"></dd>
                    <dt>Expected Pickup Time</dt>
                    <dd ng-bind="trip.ExpectedPickupTimeUtc | philDate"></dd>
                    <dt>Truck</dt>
                    <dd ng-bind="trip.Truck.RegistrationNumber"></dd>
                    <dt>Driver</dt>
                    <dd ng-bind="trip.Driver.FullName"></dd>
                    <dt>Helper(s)</dt>
                    <dd ng-bind="trip.HelperNames"></dd>
                    <dt>Supervisor</dt>
                    <dd ng-bind="trip.Supervisor.FullName"></dd>
                    <dt>Total Expected Cost</dt>
                    <dd ng-bind="trip.TotalCost.ExpectedCostInPeso | peso"></dd>
                    <dt>Total Actual Cost</dt>
                    <dd ng-bind="trip.TotalCost.ActualCostInPeso | peso"></dd>
                    <dt>Total Adjustment</dt>
                    <dd ng-bind="trip.TotalCost.Adjustment | peso"></dd>
                </dl>
            </div>

            <div class="col-sm-6">
                <table class="table table-condensed table-bordered table-responsive">
                    <thead>
                    <tr>
                        <th></th>
                        <th>Expected Cost</th>
                        <th>Actual Cost</th>
                        <th>Adjustment</th>
                        <th>Comment</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="cost in trip.Costs">
                        <td>{{cost.CostType}}</td>
                        <td>{{cost.ExpectedCostInPeso | peso}}</td>
                        <td>{{cost.ActualCostInPeso | peso}}</td>
                        <td>{{cost.Adjustment | peso}}</td>
                        <td>{{cost.Comment}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row">

            <div class="col-sm-6">
                <div ng-repeat="drop in trip.Drops" class="well well-sm">
                    <dl class="dl-horizontal">
                        <dt>Drop <span ng-bind="$index + 1"></span> Branch</dt>
                        <dd ng-bind="drop.Branch.Name"></dd>
                        <dt>Scheduled Drop Time</dt>
                        <dd ng-bind="drop.ExpectedDropTimeUtc | philDate"></dd>
                        <dt>Received By</dt>
                        <dd ng-if="drop.IsDelivered">
                            <span ng-bind="drop.ReceiverUser.FullName"></span> at
                            <span ng-bind="drop.ActualDropTimeUtc | philDate"></span>
                        </dd>
                        <dd ng-if="!drop.IsDelivered">
                            Not delivered yet
                        </dd>
                    </dl>
                    <table class="table table-condensed table-bordered table-responsive">
                        <thead>
                            <tr>
                                <th>DR#</th>
                                <th>Total Boxes</th>
                                <th ng-if="drop.IsDelivered">Rejected Boxes</th>
                                <th ng-if="drop.IsDelivered">Comment</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="dr in drop.DeliveryReceipts" class="dl-horizontal">
                                <td ng-bind="dr.DrNumber"></td>
                                <td ng-bind="dr.NumberOfBoxes"></td>
                                <td ng-if="drop.IsDelivered" ng-bind="dr.RejectedNumberOfBoxes"></td>
                                <td ng-if="drop.IsDelivered" ng-bind="dr.Comment"></td>
                            </tr>
                            <tr class="active">
                                <td>
                                    Total
                                </td>
                                <td ng-bind="drop.TotalBoxes"></td>
                                <td ng-if="drop.IsDelivered" ng-bind="drop.TotalRejectedBoxes"></td>
                                <td ng-if="drop.IsDelivered"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>

